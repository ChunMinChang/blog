I"N<p>The information about the settings for an audio device is necessary
when we are investigating the problems for audio.
Unfortunately, it’s hard to know the audio configurations
on the dysfunctional machine.
It usually takes a few days to get this information from the reporters.</p>

<h2 id="aboutsupport"><a href="about:support">about:support</a></h2>
<p>To make the communication between developers and the issue reporters efficient,
I created a table showing the audio devices information
on <strong>about:support</strong> in <em>Firefox</em>.
(You can get more details on <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1197045" title="Bug 1197045 - Add some basic audio hardware/driver/format information to about:support">Bug 1197045</a>.)</p>

<p><img src="../images/posts/media-on-Firefox-aboutsupport.png" alt="" title="Troubleshooting Information" /></p>

<p>When reporters file bugs, they can attach these information as well
so we don’t need to ask them for their settings.</p>

<h3 id="raw-data">Raw Data</h3>

<p><img src="../images/posts/rawdata-aboutsupport.png" alt="" title="Troubleshooting Information" /></p>

<p>The reporters can simply take a screenshot on their <em>Firefox</em>,
or click the <em>Copy raw data to clipboard</em> button to get something
like the following then paste it to us.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
"media": {
    "currentAudioBackend": "audiounit",
    "currentMaxAudioChannels": 2,
    "currentPreferredSampleRate": 44100,
    "audioOutputDevices": [
      {
        "name": "Internal Speakers",
        "groupId": "AppleHDAEngineOutput:1B,0,1,1:0",
        "vendor": "Apple Inc.",
        "type": 2,
        "state": 2,
        "preferred": 15,
        "supportedFormat": 12336,
        "defaultFormat": 4096,
        "maxChannels": 2,
        "defaultRate": 44100,
        "maxRate": 96000,
        "minRate": 44100,
        "maxLatency": 4272,
        "minLatency": 190
      }
    ],
    "audioInputDevices": [
      {
        "name": "Internal Microphone",
        "groupId": "AppleHDAEngineInput:1B,0,1,0:1",
        "vendor": "Apple Inc.",
        "type": 1,
        "state": 2,
        "preferred": 15,
        "supportedFormat": 12336,
        "defaultFormat": 4096,
        "maxChannels": 2,
        "defaultRate": 44100,
        "maxRate": 96000,
        "minRate": 44100,
        "maxLatency": 4105,
        "minLatency": 23
      }
    ]
  },
  ...
</code></pre></div></div>

<h3 id="future-works">Future Works</h3>
<p>I just implemented the basic version.
Some useful information like soundcards and their drivers or versions
are not included yet. 
These unsolved tasks couldn’t be addressed
without adding new APIs to our underlying audio library.
However, we are currently oxidating our library from <em>C++</em> into <em>Rust</em>,
so this work is postponed.</p>

<p>The future works can be followed on <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1498731" title="[Meta] Media section on about:support">Bug 1498731</a>.
I might have a chance to work on it again after the library is rewritten.</p>

:ET